{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#what-is-castleconquet-2","title":"What is CastleConquet 2","text":"<p>CastleConquets 2 (CC2) is a Minecraft PvP minigame project about capturing and defending a castle. It consists of multiple gamemodes and currently one map.</p> <p>The gamemodes are Conquest, Rush, Lynchmob and Siege, of which Conquest is currently available, while the other ones are currently under development.</p> <p>The castle has special features. Doors require keys or can be controlled centrally, there are cameras, a large surveillance monitor and power management. Some of these things can be upgraded during the game.</p> <p>Attackers can get into the castle by digging their way in, scaling the wall with a siege tower, blowing up the castle gate or taking a key from a defender (by killing them).</p> <p>There are also villages outside from which you can get equipment.</p> <p>Conquest is currently the only playable game mode. It is about capturing and holding flags in the castle. If the attackers hold more than half of the flags for 5 minutes, they win. The defenders win if the attackers do not manage to capture the castle within 30 minutes.</p>"},{"location":"#gamemodes","title":"Gamemodes","text":"<ul> <li>ConquestCapture and hold enough flags in the castle to win.</li> <li>BreakthroughComplete the objectives in the current zone to proceed to the next one. You win if you make it to the last one.</li> <li>LynchmobDefend the king from the angry lynch mob.</li> <li>SiegeHold the castle to gain reputation in the villages. Your team wins when it reaches a specific amount of it.</li> </ul>"},{"location":"#the-map","title":"The Map","text":"<p>While the project theoretically supports multiple maps, there is currently only one map.</p> <p>A map is not just simply a map like in other minigames. CC2 maps are very large and they require their own implementation for their special featureson.</p> <p>A map has many special features, like keycard doors, a control room with a big status screen, remote door controls, cameras, etc... There is power management where attackers can potentially cut off the power of the castle. There are also several Ways to get into the castle, like stealing keycards from defenders, blowing up doors, breaking the wall or the castle gates, placing a siege tower in front of a wall and so on.</p>"},{"location":"conquest-equipment-system/","title":"Equipment System","text":""},{"location":"conquest-equipment-system/#general","title":"General","text":"<p>The equipment system differentiates between 3 main categories: Melee, Ranged and Armor.</p> <p>Each player starts with only a default melee weapon. Players can then upgrade and specialize their equipment using the equipment shops.</p>"},{"location":"conquest-equipment-system/#upgrading","title":"Upgrading","text":"<p>Equipment can be upgraded at the equipment shops. In most cases, they are located in the castle, the attacker spawn and the villages. Upgrading works like this: - At the beginning, you can choose one of multiple weapons/armors in each category. - If you have chosen a specifig weapon/armor, you can upgrade it, which increases the stats of this weapon/armor. - At certain levels you have to specialize the equipment instead of simply upgrading it. This works in a similar way to deciding on a weapon/armor previously.</p>"},{"location":"conquest-equipment-system/#downgrading","title":"Downgrading","text":""},{"location":"conquest-equipment-system/#involuntary","title":"Involuntary","text":"<ul> <li>If you die, your current equipment will fall back to the previous equipment level.</li> <li>However, there are safe levels from which you will not be downgraded further if you die.</li> <li>If you got killed by a enemy who has better equipment than you, you will not be downgraded directly. In this case, you will be downgraded the <code>otherEquipmentLevel - yourEquipmentLevel</code>-th time you die from this player.</li> </ul>"},{"location":"conquest-equipment-system/#voluntary","title":"Voluntary","text":"<ul> <li>You cannot switch the weapons/armors or their specializations once you have selected them.</li> <li>If you are really sure that you have chosen the wrong equipment, you can buy an equipment reset at the equipment shop. This will reset the selected equipment category to the default level. then you can re-choose your weapon/armor again.</li> </ul>"},{"location":"conquest-equipment-system/#get-equipment-info","title":"Get Equipment Info","text":"<p>You can always hover over the item with your mouse to get detailed information about it. This section shows you what the values mean.</p>"},{"location":"conquest-equipment-system/#equipment-category","title":"Equipment Category","text":"<ul> <li>Upgrades to: Shows the next possible equipment levels you can upgrade your equipment to. If not shown, you have already reached the maximum level in this category.</li> <li>Downgrades to: Shows the equipment level your equipment downgrades to when you die. If not shown, you are on a safe level.</li> <li>Equipment base / Part of: Some Items come with other items you need to use them. They are then \"part of\" another item. \"Equipment base\" means that the item is not part of any item. For example, the Rocket Launcher Crossbow is the base of the Rocket Tier 3.</li> </ul>"},{"location":"conquest-equipment-system/#weaponarmor-stats","title":"Weapon/Armor Stats","text":"<ul> <li>Damage: Attack Damage</li> <li>Speed: Attack Speed which is responsible for the attack Cooldown (if not shown: default)</li> <li>Armor: Armor points</li> <li>Toughness: Armor toughness</li> <li>Protection: Level of the protection enchantment</li> <li>Other enchantments: Shown like in vanilla</li> </ul>"},{"location":"conquest-equipment-system/#examples","title":"Examples","text":""},{"location":"conquest-equipment-system/#categories","title":"Categories","text":"<p>Here you can see the upgrade maps of the categories. The dashed line shows the safe levels.</p>"},{"location":"conquest-equipment-system/#melee","title":"Melee","text":""},{"location":"conquest-equipment-system/#ranged","title":"Ranged","text":""},{"location":"conquest-equipment-system/#armor","title":"Armor","text":""},{"location":"conquest-equipment-system/#developer-info","title":"Developer Info","text":""},{"location":"conquest-equipment-system/#management-command","title":"Management command","text":"<p>The player equipment can be managed using the <code>/cc2 game players value</code> command.</p>"},{"location":"conquest-equipment-system/#usage","title":"Usage","text":"<p><code>/cc2 game players value &lt;player: (UUID|String)&gt; equipment [&lt;category: String&gt; [&lt;id: Integer&gt;]]</code></p>"},{"location":"conquest-equipment-system/#examples_1","title":"Examples","text":"<ul> <li>Get all equipments: <code>/cc2 game players value &lt;player&gt; equipment</code></li> <li>Get a specific equipment: <code>/cc2 game players value &lt;player&gt; equipment &lt;category&gt;</code></li> <li>Set a specific equipment: <code>/cc2 game players value &lt;player&gt; equipment &lt;category&gt; &lt;id&gt;</code></li> </ul>"},{"location":"conquest-equipment-system/#responsibilities","title":"Responsibilities","text":"<p>The <code>ConquestEquipmentSystem</code> handles the equipment. <code>ConquestEquipmentData</code> stores information about one equipment level and contains <code>ConquestEquipmentItem</code>s that represents the items of that equipment. The <code>ConquestEquipmentSystem</code> uses the <code>EquipmentSystem</code> (game) as a base. The <code>ConquestEquipmentGUI</code> is responsible for the equipment shop.</p>"},{"location":"conquest-flags/","title":"Flags","text":""},{"location":"conquest-flags/#general","title":"General","text":"<p>Holding flags is the main objective in conquest mode.</p> <p>For the attackers to win, they must hold more than half of all flags for 5 minutes.</p> <p>In order for the defenders to win, the attackers must run out of their available time of 30 minutes.</p> <p>Both timers are mutually exclusive. This means that if the attackers' 5-minute timer is active, the defenders' 30-minute timer is inactive. The same applies the other way round, but the attackers' 5-minute timer counts up to 5 minutes again in the background as long as it is inactive.</p>"},{"location":"conquest-flags/#behavior","title":"Behavior","text":"Status Condition Result IDLE No enemy team and no capturing progress on the flag Nothing happens Capturing Other team is in the majority on the flag Capturing progress inceases Uncapturing Holding team is in the majority on the flag Capturing progress decreases IDLE with progress No team is on the flag, but there is still capturing progress on it Capturing progress decreases slowly Tie Both holding team and other team is on the flag with the same amount of players Nothing happens <ul> <li>When the capturing progress reaches 100 %, the team that had capturing progress on the flag is now the new holding team</li> <li>\u201cTeam in majority\u201d means that the team has the most players on the flag compared to the other team.</li> </ul>"},{"location":"conquest-flags/#appearance-in-world","title":"Appearance in world","text":""},{"location":"conquest-flags/#particles","title":"Particles","text":"<p>The green or red particles on the ground are marking a flag area. The particle color is the current holding team of the flag. That means, if the flag is currently controlled by the defenders, the particles are green. When the attackers are holding the flag, the particles are red.</p> <p>Here you can see how that looks:</p> <p></p>"},{"location":"conquest-flags/#flag-object","title":"Flag Object","text":"<p>A planned feature is that there is an actual flag model in the flag area. Since we currently don't have someone who creates custom models, this feature isn't currently available.</p>"},{"location":"conquest-flags/#sidebar","title":"Sidebar","text":"<p>The sidebar shows the flags available. The color of the flag letter is the current holding team. </p> <p>There is also a capturing indicator. It is shown in the color of the team which currently has capturing progress on the flag. | Icon | State | In this example | |--|--|--| |  | Capturing | Attackers are capturing A. Capturing progress of attackers increases. | |  | Uncapturing | Defenders are uncapturing A. Capturing progress of attackers decreases. | |  | IDLE with progress | Attackers are not actively capturing A, but still have progress on it. Capturing progress of attackers decreases slowly. | | N/A | IDLE or Tie | Defenders hold A without any capturing progress by the attackers, or both attackers and defenders have the same amount of players on the flag. |</p>"},{"location":"conquest-flags/#flag-locations","title":"Flag Locations","text":""},{"location":"conquest-flags/#default-map","title":"Default map","text":"Letter Location A In front of the main gate B Center of the Yard C Tower in the Throne Building of the Yard D Park (inofficially known as \"Oxygen\") in the basement E Dining room in the basement F Water Generator Room in the basement"},{"location":"conquest-flags/#developer-info","title":"Developer info","text":""},{"location":"conquest-flags/#control-command","title":"Control command","text":""},{"location":"conquest-flags/#usage","title":"Usage","text":"<p><code>/cc2 game flags [&lt;flagId: int&gt; [area|captureprogressdecreaseidle|captureprogressdecreaseuncapture|captureprogressincreasecapture|captureprogressincreaseidle|capturingprogress|capturingteam [reset]|holdingteam [&lt;holdingTeam: int&gt;|id|location|majorityteam|name]]</code></p>"},{"location":"conquest-flags/#examples","title":"Examples","text":"<ul> <li>Get list of flags: <code>/cc2 game flags</code></li> <li>Show info about one flag: <code>/cc2 game flags &lt;flagId&gt;</code></li> <li>Show specific info about one flag: <code>/cc2 game flags &lt;flagId&gt; captureprogressdecreaseidle</code></li> <li>Change holding team: <code>/cc2 game flags &lt;flagId&gt; holdingteam 1</code></li> <li>Reset capturing team (and progress): <code>/cc2 game flags &lt;flagId&gt; capturingteam reset</code></li> </ul>"},{"location":"conquest-flags/#flag-states","title":"Flag states","text":""},{"location":"conquest-flags/#how-it-works-internally","title":"How it works internally","text":"<p>Instead of the flag states which are shown to the outside, the flag uses 3 different values which then results in the flag state:</p> <ul> <li><code>holdingTeam</code>: The team that is currently holding the flag</li> <li><code>capturingTeam</code>: The team that has currently capturing progress on the flag</li> <li><code>majorityTeam</code>: The team that has currently the majority of players on the flag</li> </ul> <p>Then there is also the <code>capturingProgress</code>: - Depending on the values, the <code>capturingProgress</code> increases, decreases or remains unchanged. If the <code>capturingProgress</code> reaches a certain value, the <code>capturingTeam</code> becomes the new holdingTeam. - The <code>capturingProgress</code> resets to <code>0</code> if there is no <code>capturingTeam</code>. - If the <code>capturingProgress</code> is <code>0</code> or below, the <code>capturingTeam</code> is cleared - The <code>holdingTeam</code> cannot be the <code>capturingTeam</code></p>"},{"location":"conquest-flags/#internal-values-to-flag-state","title":"Internal values to flag state","text":"Internal name Condition Result Shown name IDLE <code>capturingTeam</code> not set Nothing happens IDLE CAPTURING <code>capturingTeam</code> is set and <code>capturingTeam == majorityTeam</code> <code>capturingProgress</code> increases Capturing UNCAPTURING_BY_OWNER <code>capturingTeam</code> is set and <code>majorityTeam == holdingTeam</code> <code>capturingProgress</code> decreases Uncapturing UNCAPTURING_BY_OTHER <code>capturingTeam</code> is set and <code>majorityTeam != holdingTeam != capturingTeam</code> <code>capturingProgress</code> decreases N/A (not possible except when using commands) UNCAPTURING_IDLE <code>capturingTeam</code> is set and <code>majorityTeam</code> not set <code>capturingProgress</code> decreases IDLE with progress MULTIPLE_TEAMS <code>capturingTeam</code> is set and majority team set to multiple teams value (-1) Nothing happens Tie"},{"location":"conquest-flags/#responsibilities","title":"Responsibilities","text":"<ul> <li>Each flag is represented by an object of <code>ConquestFlag</code>. They are stored in the flags map in <code>ConquestGame</code>.</li> <li>A <code>ConquestFlagCapturedEvent</code>is fired when the holding team of the flag changes (due to capturing).   Cancelling this event will prevent the holding team from getting changed, but since it does not change anything else, the flag will try to change its holding team again the next tick if the conditions are the same.</li> <li>A <code>ConquestFlagPlayerOnFlagEvent</code> is fired for each player inside the flag area.   Cancelling this event will remove the player from the majority team calculation for the current tick.</li> </ul>"},{"location":"conquest-game-concept/","title":"Game Concept","text":""},{"location":"conquest-game-concept/#general","title":"General","text":"<p>Conquest is the default game mode of the CastleConquest 2 project. It is a further development of the game mode from the old \"BurgConquest\" (official name of CastleConquest 1)</p> <p>It is about capturing and holding flags. If the attackers manage to hold enough flags for a certain time, they win, otherwise the defenders win.</p>"},{"location":"conquest-game-concept/#summary","title":"Summary","text":"<p>There are two teams: attackers and defenders. The attackers start in a dedicated attacker spawn. The defenders, on the other hand, start in the castle.</p> <p>There are several flags in the castle. These belong to the defenders at the start.</p> <p>The aim of the attackers is to hold more than half of all flags for 5 minutes. If they succeed, they win the game.</p> <p>However, the attackers have a time limit of 30 minutes. If they do not manage to fulfill this condition by then, the defenders win.</p>"},{"location":"conquest-game-concept/#rules","title":"Rules","text":""},{"location":"conquest-game-concept/#teams","title":"Teams","text":"<ul> <li>Defenders: Have to prevent the attackers from capturing the castle</li> <li>Attackers: Have to capture the castle</li> </ul>"},{"location":"conquest-game-concept/#timers","title":"Timers","text":"<p>There are two mutually exclusive times.</p> <p>The game time counting down when the attackers don't have the required amount of flags to win. When the game time has expired, the attackers lose and the defenders win. The game time is paused as long as the flag timer is active.</p> <p>The flag timer is counting down then the attackers have the required amount of flags to win When the flag timer has expired, the attackers win and the defenders lose. The flag timer is counting up when until it has reached 5 minutes when it is not active.</p> <p>If one of the timers expires, an overtime can be triggered under certain circumstances. If the overtime is active, the corresponding timer is stopped until the overtime has ended. See section Overtime for more information.</p>"},{"location":"conquest-game-concept/#required-flags","title":"Required flags","text":"<p>Required flags for the attackers: More than half of all flags.</p> <p>The default map has 6 flags. Therefore, the attackers need to hold at least 4 flags to meet the required flags amount.</p>"},{"location":"conquest-game-concept/#overtime","title":"Overtime","text":"<p>Overtime can be triggered if a team is currently capturing so many flags that the timer condition for the team could still be fulfilled if nothing changes in the current situation.</p> <p>For example, if the attackers have 3/6 flags and are currently capturing 1 flag and the game time expires while they are still capturing that flag, the game time will pause so that the attackers can finish capturing this flag, which will enable the flag timer.</p> <p>Another example, if the attackers currently have all 6/6 flags but the defenders are currently capturing 2 flags at the same time and the flag timer expires, the flag timer will pause so that the defenders can finish capturing both flags which would stop the flag timer.</p> <p>For the overtime system, \"a team is currently capturing a flag\" when the team has any progress on it (States: Capturing, Uncapturing, IDLE with progress).</p>"},{"location":"conquest-game-concept/#spawning","title":"Spawning","text":"<p>Attackers will always spawn in the attacker spawn.</p> <p>Defenders can spawn in two different locations. Either in the castle or in the outposts near the villages outside. When the attackers have half of the flags or more (one less than the win condition), they are forced to spawn outside the castle. If not, they can decide if they want to spawn in the castle or outside using the <code>/changerespawn [inside|outside]</code> command.</p>"},{"location":"conquest-game-concept/#money","title":"Money","text":"<p>Players can earn money by killing players, capturing flags or supporting the team. There is also a balancer system which supports players by giving them money when they are to weak.</p> <p>Money can be used to purchase equipment and tools to break into or to repair the castle.</p>"},{"location":"map-cameras/","title":"Cameras","text":""},{"location":"map-cameras/#general","title":"General","text":"<p>Cameras are there to observe opposing players.</p>"},{"location":"map-cameras/#how-to-use","title":"How to use","text":"<p>Go to the camera screen and click on a camera.</p> <p> While you are in the camera, you can make your observations.</p> <p>To exit the camera, press SHIFT.</p> <p></p>"},{"location":"map-cameras/#why-there-are-no-cameras","title":"Why there are no cameras?","text":"<p>Depending on the map and game mode, some or all cameras are not available from the start, but must first be unlocked by upgrading.</p> <p>If no cameras are available, the camera screen will display \u201cNo cameras found\u201d.</p>"},{"location":"map-cameras/#destruction-and-repair","title":"Destruction and repair","text":""},{"location":"map-cameras/#destroy","title":"Destroy","text":"<p>Enemies can destroy cameras by hitting the camera with a melee weapon or shooting it with a bow. The camera then explodes and can no longer be used. Players who are currently using the camera will be kicked out of it.</p> <p></p>"},{"location":"map-cameras/#repair","title":"Repair","text":"<p>Cameras can be repaired by the castle crew using a replacement camera. These can - depending on the map and gamemode - be bought (in conquest, the Tool Seller sells them).</p> <p>Right-clicking with the repalcement camera onto the broken camera will repair the camera.</p> <p>For some cameras, you might need to get creative ideas how to access them.</p> <p>A working camera looks like this:</p> <p></p>"},{"location":"map-cameras/#removing-players-from-cameras","title":"Removing players from cameras","text":"<p>To get a player out of a camera, push that player that's standing in front of the camera. The player will then leave the camera and you can kill them if you want to.</p> <p>Please note that you can't see some armor parts of that player while they is using the camera.</p> <p></p>"},{"location":"map-cameras/#developer-info","title":"Developer Info","text":""},{"location":"map-cameras/#control-command","title":"Control command","text":""},{"location":"map-cameras/#usage","title":"Usage","text":"<p><code>/cc2 map value cameras [camera id] [property] [value]</code></p>"},{"location":"map-cameras/#examples","title":"Examples","text":"<ul> <li>List cameras: <code>/cc2 map value cameras</code></li> <li>Get camera properties: <code>/cc2 map value cameras &lt;camera id&gt;</code></li> <li>Get/Set camera property <code>/cc2 map value cameras &lt;camera id&gt; &lt;property&gt; [value]</code></li> </ul>"},{"location":"map-cameras/#responsibilities","title":"Responsibilities","text":"<p>Camera objects (<code>CastleCamera</code>) are stored in the <code>cameras</code> map inside the <code>CastleMap</code>.</p> <p>The player standing in front of the camera while the player is inside the camera is handled by <code>PlayerDummy</code>.</p> <p>The camera monitor is handled by <code>CameraScreen</code> which is a <code>ValueUpdatingSynchronizedScreen</code>.</p> <p>A <code>CameraPlayerAddEvent</code> is fired when a player enters the camera. A <code>CameraPlayerRemoveEvent</code> is fired when the player leaves the camera. The first one can be cancelled to regulate which player can join the camera and which not.</p> <p>A <code>CameraBreakEvent</code> is fired when a camera gets destroyed. A <code>CameraRepairEvent</code> is fired when a camera gets repaired. Both events contains the players that have performed this action and are cancellable to regulate which players can destroy/repair cameras.</p>"},{"location":"map-destruction/","title":"Map Destruction","text":""},{"location":"map-destruction/#general","title":"General","text":"<p>Map destruction provides a way for attackers to get into the castle. It is also used to access special areas on the map.</p> <p>Players can't just destroy every block in the world. There are special blocks (for example in the castle wall) players can destroy with the right tool.</p> <p>Destroyed blocks can be repaired, also using a special item.</p>"},{"location":"map-destruction/#break-blocks","title":"Break blocks","text":"<ol> <li> <p>Get the tool for the block you want to break. You will most likely use a \"Wall Breaker\" to destroy blocks in the castle wall or a \"Cutting Tool\" to destroy iron bars (aqueducts). </p> </li> <li> <p>Take the right tool in your hand. You will now see all blocks you can destroy with the tool glowing. </p> </li> <li> <p>Break the block you want to break.</p> </li> </ol>"},{"location":"map-destruction/#repair-blocks","title":"Repair blocks","text":"<ol> <li> <p>Get a repair tool. You will most likely use a \"Wall Repair Kit\" for plugging holes inside the castle wall.</p> </li> <li> <p>Right-click with the repair tool onto the broken block.</p> </li> <li> <p>Wait until the timer has finished. After the timer has finished, the block is repaired. When the timer is running, the repair kit can be removed by right-clicking on it. This can be used by attackers to prevent the wall repair.</p> </li> </ol>"},{"location":"map-destruction/#useful-information","title":"Useful information","text":"<ul> <li>The status monitor of the default map can detect if the castle is damaged. It shows a warning message at the bottom and shows a red marker at the side where the damage is.</li> </ul>"},{"location":"map-destruction/#developer-information","title":"Developer information","text":"<p>There is currently no command which allows managing damageable blocks.</p> <p>Destroyable/repairable blocks are currently handled by <code>CastleRepairManager</code>. It manages <code>DestroyableCastleBlock</code> objects. Both of them are using the <code>BlockModificationManager</code> and <code>BlockModificationZone</code>s to add exceptions to allow map destruction at this location.</p>"},{"location":"map-doors/","title":"General","text":"<p>Doors are used in the castle to deny unauthorized persons access to certain areas. However, there are also a few doors for purely decorative reasons.</p> <p></p>"},{"location":"map-doors/#states","title":"States","text":"<p>Doors can either be open, closed or destroyed. A destroyed door is like an open door, except that it can no longer be controlled. Destroyed doors can be repaired.</p> <p>A door can also be locked or unlocked. If a door is locked, it can no longer be controlled by certain means, such as the keycard reader.</p>"},{"location":"map-doors/#controlling-doors","title":"Controlling doors","text":""},{"location":"map-doors/#keycard-reader","title":"Keycard Reader","text":"<p>There is a keycard reader next to most doors. If you have the correct keycard in your inventory, \u201cAccess Granted\u201d appears on the display and the door can be opened/closed by clicking on the corresponding button.</p> <p>If \u201c[!] Locked\u201d appears on the screen, the door is locked and can no longer be controlled by the keycard reader (see door control screen).</p> <p></p> <p>On the default map, keycard readers requires power level 1 in order to work.</p>"},{"location":"map-doors/#door-control-monitor","title":"Door control monitor","text":"<p>The door control screen can be used to centrally manage all doors in the castle.</p> <p>The door control screen has different functions depending on the level: 1. display door status 2. display door status, open/close doors 3. display door status, open/close doors, lock/unlock doors</p> <p>The door control screen can be upgraded in some game modes to unlock a higher level. In other game modes, the door control screen is deactivated or set to a specific level that cannot be changed.</p> <p></p> <p>On the default map, the door control monitor requires power level 1 in order to work.</p>"},{"location":"map-doors/#auto-opening","title":"Auto-opening","text":"<p>Some doors will just automatically open when a player is nearby and will close if the player is gone.</p>"},{"location":"map-doors/#destroying-doors","title":"Destroying doors","text":"<p>If you are locked in because the castle has no power or you just want a permanent entrane into the castle without restrictions, it's probably time to send a door to hell by bombing it into oblivion.</p> <p>There are several ways to do it.</p>"},{"location":"map-doors/#gate-cannon","title":"Gate Cannon","text":"<p>If you want to destroy the gates of the castle, you can use the gate cannon for it.</p> <p>The Gate Cannon must be placed in the designated position so that it can be set up. Once it has been passed in the right place, it is automatically set up. Otherwise an error message will be displayed.</p> <p>To fire the gate cannon, you need to find the \"Fire\"-Button. It is normally located on top or on the back side of the cannon. You then need to shoot at the gate until it breaks.</p> <p>Please be aware that the cannon projectiles have an explosion size of 10. This will kill other players when they are near the door (you get kills from that btw).</p> <p>To destroy the gate cannon, you can just break any block of it and it will disappear.</p>"},{"location":"map-doors/#c4-door-explosive-charges","title":"C4 / Door Explosive Charges","text":"<p>You can blow up doors using C4.</p> <p>To attach a charge of C4 to a door, right-click on the door with the C4 item. The C4 charge is armed immediately after being placed and will explode after a few seconds.</p> <p>However, this does not mean that the door will be destroyed. Most doors need more than just one charge of C4. So if only the one C4 explodes, it is useless and the charge of C4 has been wasted. You should therefore always make sure that as much C4 as possible is attached to a door.</p> <p>If C4 is attached to a door, it cannot be opened or closed.</p> <p>C4 can be removed again by right-clicking on it. You will not get the item back.</p>"},{"location":"map-doors/#repairing-doors","title":"Repairing doors","text":""},{"location":"map-doors/#door-repair-kit","title":"Door repair kit","text":"<p>Doors can be repaired using a door repair kit. To use the Door Repair Kit, right-click in the frame of the destroyed door. The door frame is filled with scaffoldings if the repair is in progress. The current progress is displayed in the action bar. A repair can be canceled during construction by hitting the scaffolding. Once the repair is complete, the door appears and opens automatically.</p>"},{"location":"map-doors/#developer-info","title":"Developer Info","text":""},{"location":"map-doors/#control-command","title":"Control command","text":"<p>Doors can be controlled by using the <code>/cc2 map value doors</code> command.</p>"},{"location":"map-doors/#usage","title":"Usage","text":"<p><code>/cc2 map value doors [&lt;doorId&gt; [(state|location|animationtime|active [(true|false)]|(broken [true|false)]|(locked [true|false])|(name [&lt;name&gt;])|open|close|forceopen|forceclose|destroy|repair)]]</code></p>"},{"location":"map-doors/#examples","title":"Examples","text":"<ul> <li>List all: <code>/cc2 map value doors</code></li> <li>Get info: <code>/cc2 map value doors control_room_north</code></li> <li>Get specific info: <code>/cc2 map value doors control_room_north broken</code></li> <li>Set info: <code>/cc2 map value doors control_room_north broken true</code></li> <li>Actions: <code>/cc2 map value doors control_room_north open</code></li> </ul>"},{"location":"map-doors/#responsibilities","title":"Responsibilities","text":"<p>The door system is using the <code>DoorManager</code> inside <code>CastleMap</code> to handle <code>CustomDoor</code> objects which are representing each door.</p> <p>The \"door controlling systems\" (like the keycard readers) are handled by <code>DoorAccessProviders</code>, which are stored in the <code>DoorAccessContainer</code> which is inside <code>CastleMap</code>. <code>DoorAccessProviders</code> can be replaced (e.g. by upgrade tasks inside the specific map implementations) to change door behavior.</p> <p>The door control monitor (<code>DoorControlMonitor</code>) is doing it's own thing, without any relation to the <code>DoorAccessProvider</code>s.</p>"},{"location":"map-items/","title":"Items","text":"<ul> <li>Cutting tool: Can break iron barsand other light-resistent materials.</li> <li>Door Explosive / C4</li> <li>Door Repair Kit</li> <li>EMP: An item which destroys all keycards in the world when triggered. This includes all items which have a keycard functionality, such as writable keycards, replica keycards, and any other types of keycards.</li> <li>Flashlight: Gives you night vision and prevents and allows to see in the castle's basement when the light is off.</li> <li>Gate Cannon</li> <li>Keycard (writable): A keycard where permissions can be added to or removed from at the Keycard Manager villager. Also known as \"Keycard\".</li> <li>Keycard (other): Other keycards for the doors, which are not writable keycards. Those keycards are gamemode-dependent. An example is the \"Replica Keycard\" from Conquest.</li> <li>Old pickaxe: Can be used to obtain coal ore in the mine.</li> <li>Siege Tower: Spawns a tower in front of the castle wall get on the castle walls. Can be destroyed by destroying any block of it.</li> <li>TNT: When placed, it triggers immediatly and explodes. Available with variable amount of power.</li> <li>Replacement camera</li> <li>Wall breaker: Breaks damaged parts of the castle wall</li> <li>Wall Repair Kit</li> </ul>"},{"location":"map-power-management/","title":"Power Management","text":""},{"location":"map-power-management/#general","title":"General","text":"<p>There are many systems in the castle that require electricity. Some of them more than others.</p> <p>The castle crew must ensure that the systems in the castle have a functioning power supply to ensure their functionality.</p> <p>Attackers, on the other hand, can try to sabotage the power supply in order to disrupt the systems in the castle and weaken the castle crew.</p> <p>This article only describes the standard power system. Other maps may use a different system.</p>"},{"location":"map-power-management/#how-the-energy-system-works","title":"How the energy system works","text":""},{"location":"map-power-management/#how-it-works","title":"How it works","text":"<p>In the castle's energy system, there is no amount of electricity that is available and no direct consumption.</p> <p>Instead, there is a power level that indicates how much energy is currently available to the castle.</p> <p>Every energy source can influence the power level. Some energy sources raise it to a certain value, some increase it by a certain value. In addition, there are energy stores that are charged as long as other power sources are available and are discharged when the castle has too little power.</p> <p>In the end, the global power level of the castle is calculated from all power sources. Certain systems then only work from a certain power level. If it is lower, those systems will not work or will have limited functionality.</p>"},{"location":"map-power-management/#types-of-power-sources","title":"Types of power sources","text":""},{"location":"map-power-management/#producers","title":"Producers","text":"<p>Each energy producer provides a specific power level.</p> <p>This power level can be made available in two different ways: - Hold: Keeps the power level at a certain value. If there is already an energy source that provides a higher power level, the energy source has no influence. - Add Up: The power level of all add-up power sources is added together. This added value then forms another hold power level.</p>"},{"location":"map-power-management/#storages","title":"Storages","text":"<p>Power storage systems store energy as long as they provide the same or a lower power level than other power sources.</p> <p>However, if they provide a higher power level, they are discharged.</p> <p>Depending on the energy storage device, the speed of charging and discharging depends on the distance between the power level produced and the power level provided by the energy storage device.</p>"},{"location":"map-power-management/#calculation-of-the-power-level","title":"Calculation of the power level","text":"<p>The power level is calculated using the following formulas:</p> <p>$$\\text{addUpPowerSourceLevel} = \\sum_{i=1}^{n} P_{\\text{source}, i}$$</p> <p>$$\\text{heldPowerSourceLevel} = \\max_{k=1, \\dots, m} (P_{\\text{held}, k})$$</p> <p>$$\\text{providedPowerLevel} = \\max(\\text{addUpPowerSourceLevel}, \\text{heldPowerSourceLevel})$$</p> <p>$$\\text{highestPowerStorageLevel} = \\max_{k=1, \\dots, o} (P_{\\text{storage}, k})$$</p> <p>$$\\text{powerLevel} = \\max(\\text{providedPowerLevel}, \\text{highestPowerStorageLevel})$$</p> <p>If highestPowerStorageLevel is higher than providedPowerLevel, the power storage will discharge. If it is empty, it will return power level 0.</p> <p>If highestPowerStorageLevel lower or equal than providedPowerLevel, the power storage will charge.</p>"},{"location":"map-power-management/#power-control-monitor","title":"Power control monitor","text":"<p>The power control monitor displays all power sources and the current power level. It can also be used to change some settings relating to the power supply.</p> <p> From left to right and top to bottom: - Name: The name of the power source (in this picture it is \"Small Aqueduct\", \"Large Aqueduct\", \"Battery\" and \"Generator\") - Storage Type: The type of the storage     - <code>=</code>: Held power producer   - <code>+</code>: Add up power producer   - <code>S</code>: Power storage - Status indicator: Displays the current status     - On: Source enabled and producing power   - Off: Source disabled or not producing power   - FLL: Storage-specific status indicator which stands for \"Full\"   - CHG: Storage-specific status indicator which stands for \"Charging\" - Provided power level: The power level the energy source is currently providing (\"-----\" for nothing and \"PWR x\" for power level)</p> <p>Storage-specific: - Charge Level: The current charge level of the storage (in this picture 100 %)</p> <p>Battery-specific (specific type of storage): - Power level selection: Press \"&lt;\" or \"&gt;\" buttons to select the power level (in this picture \"&lt;0&gt;, where 0 is the selected power level) - Autostart indicator:: If \"AS\" is shown, the autostart feature is available for that battery </p> <p>Generator-specific: - Fuel indicator: The time the fuel of the generator is burning (in this picture \"FUEL 0s + 0s\"). The first value is the fuel currently burning inside the generator. The secon value is the fuel inside the generator's inventory.</p>"},{"location":"map-power-management/#power-producers","title":"Power Producers","text":"<p>There are several energy sources to power the castle.</p> <p>Some of these are internal, others external.</p> <p>The most important ones are listed here, but other maps may also have other energy sources.</p>"},{"location":"map-power-management/#aqueducts","title":"Aqueducts","text":"<p>Aqueducts drive a water wheel that generates electricity. They are the main source of energy on the default map.</p> <p>An important advantage of the aqueduct as an energy source is that the player does not have to do anything to maintain it as long as the aqueduct is not deactivated manually. One disadvantage, however, is that it can be sabotaged from the outside. As the castle crew, you then have to leave the castle to switch it back on.</p> <p>On the default map, the large aqueduct produces power level 2, the small one power level 1. If both are active, they produce power level 3 because they are \u201cadd up\u201d power sources (see calculation). The small aqueduct automatically fills with water during thunderstorms, even if the aqueduct is deactivated.</p> <p> </p>"},{"location":"map-power-management/#coal-generator","title":"Coal generator","text":"<p>The power generation furnace generates energy by burning all possible fuels that can be found on the map.</p> <p>One advantage is that the items intended for combustion can be stored in the castle so that the castle crew does not have to leave the castle to maintain the power source.</p> <p>A major disadvantage, however, is that you need enough fuel. If the castle runs out of fuel, the power supply fails and the castle crew must obtain new fuel from outside.</p> <p>On the standard map, the generator raises the power level to 2. If there are power sources that produce a higher power level, the generator does not change anything (and should therefore be deactivated by the user).</p> <p></p> <p>There is also an Easter Egg that can be used to burn more than just items in the generator.</p>"},{"location":"map-power-management/#power-storages","title":"Power Storages","text":""},{"location":"map-power-management/#battery","title":"Battery","text":"<p>The batteries are an energy storage option that makes it possible to delay power failures somewhat and thus create a period of time in which the castle crew can restore the other power sources.</p> <p>Batteries have a charge level, a capacity and a maximum power level that they can provide.</p> <p></p>"},{"location":"map-power-management/#charge-level","title":"Charge level","text":"<p>The capacity indicates the maximum amount of energy the battery can store.</p> <p>The charge level of the battery indicates how much energy the battery currently still has stored. If this drops to 0, the battery is empty and does not provide a power level. If the battery is charged, the charge level increases until the capacity is reached.</p> <p>How exactly the charge level in the battery changes when it is charged/discharged differs depending on the battery. The standard calculation is as follows: - Charging:  $chargeLevel = chargeLevel + (powerLevelDifference \\cdot chargeMultiplier)$ - Discharging:  $powerLevelDifference = highestPowerStoragePowerLevel - highestSourcePowerLevel$ $chargeLevel = chargeLevel - (powerLevelDifference \\cdot dischargeMultiplier)$ Here, $providedPowerLevel$ is the power level provided by the current battery, and $highestSourcePowerLevel$ is the highest power level provided by power sources.</p> <p>On the default map, $chargeMultiplier$ is currently $2$ and $dischargeMultiplier$ is currently 3.</p>"},{"location":"map-power-management/#power-level","title":"Power level","text":"<p>The maximum power level indicates the maximum power level that the battery can provide.</p> <p>The power level indicates how much power the battery is currently actually providing. This value can usually be set by the user and cannot exceed the maximum power level.</p> <p>The higher the selected power level of the battery, the faster it discharges.</p> <p>Setting the power level allows users to weigh up between the functionality of some systems and a longer runtime. The battery can also be used as a buffer if a higher power level is required for a short time than is currently available from power producers.</p>"},{"location":"map-power-management/#autostart","title":"Autostart","text":"<p>If the user has deactivated the battery and the power fails in the entire castle, the user can no longer activate the battery via the control screens, as these will also fail.</p> <p>The autostart feature solves this problem by automatically activating the battery as soon as the power in the castle fails.</p> <p>This feature is not available for all batteries.</p>"},{"location":"map-power-management/#developer-info","title":"Developer Info","text":""},{"location":"map-power-management/#control-command","title":"Control Command","text":""},{"location":"map-power-management/#usage","title":"Usage","text":"<p><code>/cc2 map powermonitor [(override [value]|powerlevel|sources [source id] [property] [value])]</code></p>"},{"location":"map-power-management/#examples","title":"Examples","text":"<ul> <li>Show general status: <code>/cc2 map powermonitor</code></li> <li>Override power level: <code>/cc2 map powermonitor override &lt;power level&gt;</code> (set override to -1 to disable)</li> <li>Show power level: <code>/cc2 map powermonitor powerlevel</code></li> <li>Get power sources: <code>/cc2 map powermonitor sources</code></li> <li>Get power source properties: <code>/cc2 map powermonitor sources &lt;source id&gt;&gt;</code></li> <li>Get/Set power source property: <code>/cc2 map powermonitor sources &lt;source id&gt; &lt;property&gt; [value]</code></li> </ul>"},{"location":"map-power-management/#responsibilities","title":"Responsibilities","text":"<p>The <code>PowerManager</code> handles all power sources and power storages.</p> <p>Power producers have to implement <code>PowerProducer</code> and power storages have to implement <code>PowerStorage</code>. Then they have to be registered to the power manager. Default power producers are <code>PowerGenerator</code> and <code>WaterPipe</code> (Aqueduct). Default power storage is <code>Battery</code>.</p> <p>A <code>PowerLevelChangeEvent</code> is fired when the power level of the castle changes. It is not cancellable.</p> <p>Power-consuming devices can use an implementation of <code>PowerProvider</code>to check if power is available.</p> <p>The power control monitor is handled by <code>PowerMonitor</code>, which itself is a <code>ValueUpdatingSynchronizedScreen</code>.</p>"},{"location":"map-rules/","title":"Rules/Behaviors","text":"<p>The map has some default behavior: - You can't break or place blocks by default - You can't interact with or damage entities</p> <p>All of this can be overridden for specific cases. For example, players can destroy blocks in the castle walls with the correct tools. Players can also interact with item shops.</p>"},{"location":"map-upgrades/","title":"Upgrades","text":""},{"location":"map-upgrades/#what-are-upgrades","title":"What are Upgrades?","text":"<p>Upgrades allow players to enhance functionality of the map. They can be used to optimize existing systems, unlock new mechanics, or customize the game world.</p>"},{"location":"map-upgrades/#how-to-get-upgrades","title":"How to get Upgrades?","text":"<p>Getting/unlocking upgrades depends on the specific gamemode you are currently playing. Some gamemodes have ways to get upgrades, some are always on a specific upgrade level for certain upgradable things.</p> <p>For example, in Conquest there are upgrade missions. Completing those missions will unlock an upgrade. In Rush, there is no way to upgrade the castle. The castle there is in a \"fixed state\", depending on the zone the gamemode is currently in.</p>"},{"location":"map-upgrades/#upgrades","title":"Upgrades","text":"<p>The upgrades on the default map are the following: - Battery Upgrade: Increases the battery capacity and therefore the time the castle can run its electrical systems without an external power source. - Status monitor upgrade: Adds new features like player detection to the status monitor. - Door Upgrade: Adds centralized control of all doors in the castle through the door control monitor. On the first level, the status can be viewed. On the second, they can be opened or closed and on the third level they can be locked or unlocked. - Camera Upgrade: Adds cameras to the castle to observe the enemies.</p>"},{"location":"map-upgrades/#developer-info","title":"Developer Info","text":""},{"location":"map-upgrades/#control-command","title":"Control command","text":"<p><code>/cc2 map value upgrades [upgrade id] [level|(null)]</code></p>"},{"location":"map-upgrades/#responsibilities","title":"Responsibilities","text":"<p>Upgrades (<code>CastleUpgrade</code>) are managed by the <code>CastleUpgradeManager</code>.</p> <p>The <code>UpgradeAppliedEvent</code> is fired when an upgrade has been changed. It contanis the previous and the new upgrade level and the upgrade id.</p>"},{"location":"map-upgrades/#how-upgrades-work","title":"How upgrades work","text":""},{"location":"map-upgrades/#applyingremoving-upgrades","title":"Applying/removing Upgrades","text":"<p>The <code>CastleUpgrade</code> contains a list of <code>Level</code> interfaces (which are representing upgrade levels).</p> <p>The <code>Level</code> interface contains an <code>onApply</code> and <code>onRemove</code> method. When an upgrade level has been changed, the <code>onRemove</code>-method of the old upgrade level is called. Then, the <code>onApply</code>-method of the new upgrade level is called. If the upgrade is removed (unlikely, but possible), only the <code>onRemove</code>-method of the previous applied level is called, without calling any <code>onApply</code> method.</p> <p>In the implementation of the <code>onRemove</code> method, the entire status of the <code>Level</code> must be completely reversed. After <code>onRemove</code> has been called, none of the changes to the level may remain. It is absolutely essential that a level is completely cleaned up in the <code>onRemove</code> method. No remnants of the old state may remain. If there are overlaps between the old and new level, these must be explicitly restored in <code>onApply</code> of the new level. IF YOU DON'T FOLLOW THIS RULE, THINGS MAY BREAK!</p>"},{"location":"map-upgrades/#example","title":"Example","text":"<p>When the <code>onRemove</code>-method of the battery upgrade is called, it completely removes the battery block structure, regardless if it is there or not. Then, in the <code>onApply</code>-method, it puts the new block structure into the world.</p> <p>This ensures, that if the battery upgrade is not upgraded linear, but set to a random level, everything is set correctly. This also ensures that if the battery upgrade is removed, all batteries disappear.</p>"}]}